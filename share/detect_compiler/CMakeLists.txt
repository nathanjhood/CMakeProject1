cmake_minimum_required(VERSION 3.20)
project(detect_compiler NONE)

if(CMAKE_GENERATOR STREQUAL "Ninja" AND CMAKE_SYSTEM_NAME STREQUAL "Windows")
    set(CMAKE_C_COMPILER_WORKS 1)
    set(CMAKE_C_COMPILER_FORCED 1)
    set(CMAKE_CXX_COMPILER_WORKS 1)
    set(CMAKE_CXX_COMPILER_FORCED 1)
endif()

enable_language(C)
enable_language(CXX)
enable_language(ASM)
enable_language(Fortran)
enable_language(OBJC)
enable_language(OBJCXX)


file(SHA1 "${CMAKE_C_COMPILER}" C_HASH)
file(SHA1 "${CMAKE_CXX_COMPILER}" CXX_HASH)
file(SHA1 "${CMAKE_Fortran_COMPILER}" Fortran_HASH)
file(SHA1 "${CMAKE_ASM_COMPILER}" ASM_HASH)
file(SHA1 "${CMAKE_OBJC_COMPILER}" C_HASH)
file(SHA1 "${CMAKE_OBJCXX_COMPILER}" CXX_HASH)
string(SHA1 COMPILER_HASH "${C_HASH}${CXX_HASH}${Fortran_HASH}${ASM_HASH}${OBJC_HASH}${OBJCCXX_HASH}")

#message("#COMPILER_C_HASH#${C_HASH}")
message("<CMAKE_C_COMPILER_VERSION>: ${CMAKE_C_COMPILER_VERSION}")
message("<CMAKE_C_COMPILER_ID>: ${CMAKE_C_COMPILER_ID}")
#message("#COMPILER_CXX_HASH#${CXX_HASH}")
message("<CMAKE_CXX_COMPILER_VERSION>: ${CMAKE_CXX_COMPILER_VERSION}")
message("<CMAKE_CXX_COMPILER_ID>: ${CMAKE_CXX_COMPILER_ID}")
#message("#COMPILER_Fortran_HASH#${Fortran_HASH}")
message("<CMAKE_Fortran_COMPILER_VERSION>: ${CMAKE_Fortran_COMPILER_VERSION}")
message("<CMAKE_Fortran_COMPILER_ID>: ${CMAKE_Fortran_COMPILER_ID}")
#message("#COMPILER_ASM_HASH#${ASM_HASH}")
message("<CMAKE_ASM_COMPILER_VERSION>: ${CMAKE_ASM_COMPILER_VERSION}")
message("<CMAKE_ASM_COMPILER_ID>: ${CMAKE_ASM_COMPILER_ID}")
#message("#COMPILER_C_HASH#${C_HASH}")
message("<CMAKE_OBJC_COMPILER_VERSION>: ${CMAKE_OBJC_COMPILER_VERSION}")
message("<CMAKE_OBJC_COMPILER_ID>: ${CMAKE_OBJC_COMPILER_ID}")
#message("#COMPILER_CXX_HASH#${CXX_HASH}")
message("<CMAKE_OBJCXX_COMPILER_VERSION>: ${CMAKE_OBJCXX_COMPILER_VERSION}")
message("<CMAKE_OBJCXX_COMPILER_ID>: ${CMAKE_OBJCXX_COMPILER_ID}")

#message("#COMPILER_HASH#${COMPILER_HASH}")
